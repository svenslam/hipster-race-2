<!DOCTYPE html>
<html lang="nl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Spel Aanvulling - Race & Muziek</title>
    <link rel="stylesheet" href="style.css">
    
    <!-- React & Tailwind Integration -->
    <script src="https://cdn.tailwindcss.com"></script>
    <script>
      tailwind.config = {
        theme: {
          extend: {
            colors: {
              game: {
                primary: '#6366f1', 
                secondary: '#8b5cf6', 
                accent: '#ec4899', 
                dark: '#0f172a', 
                surface: '#1e293b', 
              }
            },
            animation: {
              'pulse-fast': 'pulse 0.5s cubic-bezier(0.4, 0, 0.6, 1) infinite',
              'fade-in': 'fadeIn 0.5s ease-out forwards',
            },
            keyframes: {
              fadeIn: {
                '0%': { opacity: '0', transform: 'translateY(10px)' },
                '100%': { opacity: '1', transform: 'translateY(0)' },
              }
            }
          },
        },
      }
    </script>
    
    <!-- Import Map for React -->
    <script type="importmap">
{
  "imports": {
    "react": "https://esm.sh/react@18.2.0",
    "react-dom/client": "https://esm.sh/react-dom@18.2.0/client",
    "lucide-react": "https://esm.sh/lucide-react@0.263.1",
    "react-dom/": "https://aistudiocdn.com/react-dom@^19.2.0/"
  }
}
</script>
    <!-- Babel for JSX support in browser -->
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>

    <!-- Safety Script -->
    <script>
      (function() {
        function fallbackShowView(viewId, skipRandom) {
           console.log("Fallback showView triggered for:", viewId);
           var views = document.querySelectorAll('.view');
           views.forEach(function(v) { 
             v.classList.toggle('hidden', v.id !== viewId);
             v.classList.toggle('active', v.id === viewId);
           });
        }

        window.showView = window.showView || fallbackShowView;
        window.startMusicQuiz = window.startMusicQuiz || function() {};
        window.startF1Quiz = window.startF1Quiz || function() {};
        window.getBoardCommand = window.getBoardCommand || function() {};
        window.toggleMainMenuAudio = window.toggleMainMenuAudio || function() {};
        window.showMusicAnswer = window.showMusicAnswer || function() {};
        window.showF1Answer = window.showF1Answer || function() {};
      })();
    </script>
</head>
<body>
    <!-- Fixed Header -->
    <header id="main-header">
        <h1>üèéÔ∏è Spel Aanvulling</h1>
    </header>

    <!-- Main Content Container -->
    <main>
        <!-- Main Menu View -->
        <div id="main-menu" class="view active full-height-view">
            <div class="menu-content">
                <h2>Kies je Spel</h2>
                
                <!-- Button Grid: Flex Column ensures they stack -->
                <div class="button-grid">
                    
                    <!-- Button 1: Music -->
                    <button class="game-btn btn-spotify" onclick="showView('music-view')">
                        <span class="icon">üéµ</span>
                        <div class="btn-content">
                            <span class="text">Muziek Quiz</span>
                            <span class="sub">Spotify Raadspel</span>
                        </div>
                    </button>
                    
                    <!-- Button 2: F1 -->
                    <button class="game-btn btn-f1" onclick="showView('f1-view')">
                        <span class="icon">üèÅ</span>
                        <div class="btn-content">
                            <span class="text">F1 Kennis</span>
                            <span class="sub">Techniek & Max</span>
                        </div>
                    </button>
                    
                    <!-- Button 3: Board -->
                    <button class="game-btn btn-board" onclick="showView('board-view')">
                        <span class="icon">üé≤</span>
                        <div class="btn-content">
                            <span class="text">Bordspel</span>
                            <span class="sub">Pak een Kaart</span>
                        </div>
                    </button>

                </div>
            </div>

            <div class="menu-footer">
                <button id="audio-toggle-btn" onclick="toggleMainMenuAudio()" class="audio-btn">üîá Muziek Uit</button>
            </div>
        </div>

        <!-- Spotify View -->
        <div id="music-view" class="view hidden full-height-view">
            <div class="game-card">
                <div class="card-header spotify-header">
                    <h2>üéµ Muziekquiz</h2>
                    <span class="badge">Voor of Na 2000?</span>
                </div>
                <div class="card-body">
                    <div id="music-output" class="output-box">Druk op start...</div>
                </div>
                <div class="card-actions">
                    <button onclick="startMusicQuiz()" class="action-btn primary">Start Nieuw Lied</button>
                    <button id="music-answer-btn" onclick="showMusicAnswer()" class="action-btn warning" style="display: none;">Toon Antwoord</button>
                    <button id="music-back-btn" onclick="showView('main-menu')" class="action-btn secondary" style="display: none;">‚Ü©Ô∏è Terug</button>
                </div>
                <!-- Initial Back Button (hidden when game active) -->
                <button onclick="showView('main-menu')" class="text-btn top-right-close">‚úï</button>
            </div>
        </div>

        <!-- F1 View -->
        <div id="f1-view" class="view hidden full-height-view">
             <div class="game-card">
                <div class="card-header f1-header">
                    <h2>üèÅ F1 Quiz</h2>
                    <span class="badge">Expert Vragen</span>
                </div>
                <div class="card-body">
                    <div id="f1-output" class="output-box">Klaar voor de start?</div>
                </div>
                <div class="card-actions">
                    <button onclick="startF1Quiz()" class="action-btn primary">Nieuwe Vraag</button>
                    <button id="f1-answer-btn" onclick="showF1Answer()" class="action-btn warning" style="display: none;">Toon Antwoord</button>
                    <button onclick="showView('main-menu')" class="action-btn secondary">‚Ü©Ô∏è Terug</button>
                </div>
            </div>
        </div>

        <!-- Board View -->
        <div id="board-view" class="view hidden full-height-view">
             <div class="game-card">
                <div class="card-header board-header">
                    <h2>üé≤ Opdracht</h2>
                    <span class="badge">Actie Kaart</span>
                </div>
                <div class="card-body centered-content">
                    <div id="board-output" class="output-box large-text"></div>
                </div>
                <div class="card-actions">
                    <button onclick="getBoardCommand()" class="action-btn primary">Trek Kaart</button>
                    <button onclick="showView('main-menu')" class="action-btn secondary">‚Ü©Ô∏è Terug</button>
                </div>
            </div>
        </div>
    </main>
    
    <!-- React Container (Popup Overlay) -->
    <div id="react-view" class="view hidden"></div>
    
    <script src="script.js" defer></script>
    
    <!-- Mount React App with Babel -->
    <script type="text/babel" data-type="module" src="index.js"></script>
</body>
</html>